<!doctype html>
<html>
	<head>
		<meta content="IE=edge" http-equiv="X-UA-Compatible">
		<meta charset="utf-8">
		<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
		<meta name="theme-color" content="#000000">

		<title>Tree</title>

		<link rel="stylesheet" href="/stylesheets/fullscreen.css" type="text/css">

	</head>

	<body class="canvas canvas_tree canvas_tree_index">
		<canvas id="canvas"></canvas>

<script type="text/javascript">
'use strict'

var depth = 16,
	branchWidth = 24,
	step = 0
var newDepthPub, depthPub
var canvas = document.getElementById('canvas'),
	ctx = canvas.getContext('2d')

function drawTree(ctx, startX, startY, length, angle, depth, branchWidth) {
	var rand = Math.random,
		newDepth,
		newLength, newAngle, maxBranch = 3,
		endX, endY, maxAngle = 2 * Math.PI / 4,
		subBranches, lenShrink

	ctx.beginPath()
	ctx.moveTo(startX, startY)
	endX = startX + length * Math.cos(angle)
	endY = startY + length * Math.sin(angle)
	ctx.lineCap = 'round'
	ctx.lineWidth = branchWidth
	ctx.lineTo(endX, endY)

	if (depth <= 2) {
		ctx.strokeStyle = 'rgb(0,' + (((rand() * 64) + 128) >> 0) + ',0)'
	} else {
		ctx.strokeStyle = 'rgb(' + (((rand() * 64) + 64) >> 0) + ',50, 25)'
	}
	ctx.stroke()

	newDepth = depth - 1
	if (!newDepth) return


	subBranches = maxBranch - 1
	branchWidth *= .75

	for (var i = 0; i < subBranches; i++) {
		newAngle = angle + rand() * maxAngle - maxAngle * .5
		newLength = length * (.7 + rand() * .3)
		setTimeout(function() {
			drawTree(ctx, endX, endY, newLength, newAngle, newDepth, branchWidth)
			newDepthPub = newDepth
			depthPub = depth
			step++
		}, 100)
	}
}

function init() {
	step = 0
	canvas.width = window.innerWidth
	canvas.height = window.innerHeight
	ctx.globalCompositeOperation = 'lighter'
	ctx.clearRect(0, 0, window.innerWidth, window.innerHeight)
	drawTree(ctx, window.innerWidth / 2, window.innerHeight, 120, -Math.PI / 1.5, depth, branchWidth)
}

function regrow() {
	if (step < 65534) return
	init()
}

document.querySelector('body').addEventListener('click', function(e) {
	regrow()
})

init()

</script>

<div id="fullscreen"></div>
<div id="signature">Abram</div>

<script>
'use strict'
function toggleFullScreen() {
	var fullscreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement

	if (!fullscreenElement) {
		// Native
		if (document.documentElement.requestFullscreen) {
			document.documentElement.requestFullscreen()
		// Firefox
		} else if (document.documentElement.mozRequestFullScreen) {
			document.documentElement.mozRequestFullScreen()
		// Webkit
		} else if (document.documentElement.webkitRequestFullscreen) {
			document.documentElement.webkitRequestFullscreen()
		// IE/Edge
		} else if (document.documentElement.msRequestFullscreen) {
			document.documentElement.msRequestFullscreen()
		}
	} else {
		// Native
		if (document.exitFullscreen) {
			document.exitFullscreen()
		// Webkit
		} else if (document.webkitExitFullscreen) {
			document.webkitExitFullscreen()
		// Firefox
		} else if (document.mozExitFullscreen) {
			document.mozExitFullscreen()
		// IE/Edge
		} else if (document.msExitFullscreen) {
			document.msExitFullscreen()
		}
	}
}
document.getElementById('fullscreen').addEventListener('click', toggleFullScreen)
</script>

	</body>
</html>
